_BASE_: ./base_with_eval.yml

# Minimal test - copy of solution_2_cosine_annealing but with only 5 epochs
# This WILL train if Solution 2 works

MODEL:
  BACKBONE:
    WITH_IBN: True
  HEADS:
    WITH_BNNECK: True
  LOSSES:
    CE:
      SCALE: 0.5
    TRI:
      SCALE: 1.5
      HARD_MINING: True

DATASETS:
  NAMES: ("Market1501",)
  TESTS: ("Market1501",)

DATALOADER:
  NUM_WORKERS: 0

OUTPUT_DIR: logs/test_sanity_check

SOLVER:
  MAX_EPOCH: 5
  IMS_PER_BATCH: 16
  BASE_LR: 0.0005
  AMP:
    ENABLED: False
  WARMUP_ITERS: 1000
  SCHED: CosineAnnealingLR

TEST:
  EVAL_PERIOD: 2
  IMS_PER_BATCH: 128
