# Base configuration for plateau solutions - evaluation enabled
_BASE_: ../fast-reid/configs/Base-bagtricks.yml

# CRITICAL FIX: Use BalancedIdentitySampler for Triplet Loss
# Triplet loss REQUIRES multiple images per identity in each batch
# NaiveIdentitySampler (default) breaks triplet loss by not guaranteeing positive pairs
DATALOADER:
  SAMPLER_TRAIN: "BalancedIdentitySampler"
  NUM_INSTANCE: 4
  NUM_WORKERS: 0

# Enable evaluation every 2 epochs to match checkpoint period
TEST:
  EVAL_PERIOD: 2
  IMS_PER_BATCH: 128

# Reduce logging noise and disable AMP (incompatible with current training loop)
SOLVER:
  CHECKPOINT_PERIOD: 2
  AMP:
    ENABLED: False
